"use strict";(self.webpackChunkcict_document=self.webpackChunkcict_document||[]).push([[6309],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>f});var n=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(a),m=s,f=u["".concat(l,".").concat(m)]||u[m]||c[m]||o;return a?n.createElement(f,r(r({ref:t},p),{},{components:a})):n.createElement(f,r({ref:t},p))}));function f(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=a.length,r=new Array(o);r[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:s,r[1]=i;for(var d=2;d<o;d++)r[d]=a[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},938:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var n=a(7462),s=(a(7294),a(3905));const o={id:"protobuf_fieldmask",title:"Protobuf FieldMask",sidebar_label:"Protobuf FieldMask",sidebar_position:2},r=void 0,i={unversionedId:"topics/protobuf_fieldmask",id:"topics/protobuf_fieldmask",title:"Protobuf FieldMask",description:"This guide was generated by ChatGPT. All content in this guide was generated by ChatGPT and should not be considered as professional advice or recommendations. Use at your own risk.",source:"@site/docs/topics/protobuf_fieldmask.md",sourceDirName:"topics",slug:"/topics/protobuf_fieldmask",permalink:"/cict-document-deploy/docs/topics/protobuf_fieldmask",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/topics/protobuf_fieldmask.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"protobuf_fieldmask",title:"Protobuf FieldMask",sidebar_label:"Protobuf FieldMask",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Load Balancing",permalink:"/cict-document-deploy/docs/topics/loadbalancing"},next:{title:"Rules Proto gRPC",permalink:"/cict-document-deploy/docs/topics/rules_proto_grpc"}},l={},d=[{value:"Creating a Field Mask",id:"creating-a-field-mask",level:3},{value:"Applying a Field Mask",id:"applying-a-field-mask",level:3},{value:"Design princile",id:"design-princile",level:3},{value:"Conclusion",id:"conclusion",level:3},{value:"Resources",id:"resources",level:3}],p={toc:d},u="wrapper";function c(e){let{components:t,...a}=e;return(0,s.kt)(u,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("admonition",{type:"warning"},(0,s.kt)("p",{parentName:"admonition"},"This guide was generated by ChatGPT. All content in this guide was generated by ChatGPT and should not be considered as professional advice or recommendations. Use at your own risk.")),(0,s.kt)("p",null,"Protocol Buffers (protobuf) is a popular data serialization format used in distributed systems. One of the key features of protobuf is its ability to define schemas for data structures, which enables type safety and efficient serialization and deserialization."),(0,s.kt)("p",null,"In some cases, it may be necessary to update only a subset of the fields in a protobuf message, while leaving the other fields unchanged. This is where field masks come into play."),(0,s.kt)("p",null,"A field mask is a protobuf message that specifies which fields in another protobuf message should be updated. The field mask message contains a repeated field of strings, where each string is the name of a field in the target message. When applying the field mask, only the specified fields are updated, while the others are left unchanged."),(0,s.kt)("h3",{id:"creating-a-field-mask"},"Creating a Field Mask"),(0,s.kt)("p",null,"Creating a field mask is a simple process. First, create a new protobuf message that will serve as the field mask. This message should have a repeated field of strings, where each string is the name of a field in the target message."),(0,s.kt)("p",null,"For example, suppose we have a protobuf message Person with fields name, email, and phone_number. To create a field mask that updates only the name and phone_number fields, we can define the following message:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-protobuf"},"message PersonFieldMask {\n  repeated string paths = 1;\n}\n")),(0,s.kt)("p",null,"To apply this field mask, we would set the paths field to a list of the field names we want to update:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cpp"},'PersonFieldMask field_mask;\nfield_mask.add_paths("name");\nfield_mask.add_paths("phone_number");\n')),(0,s.kt)("h3",{id:"applying-a-field-mask"},"Applying a Field Mask"),(0,s.kt)("p",null,"To apply a field mask, we can use the FieldMaskUtil class provided by the protobuf library. The FieldMaskUtil class provides methods for applying field masks to protobuf messages."),(0,s.kt)("p",null,"For example, suppose we have a Person message with the following data:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-protobuf"},"message Person {\n  string name = 1;\n  string email = 2;\n  string phone_number = 3;\n}\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cpp"},'Person person;\nperson.set_name("John Doe");\nperson.set_email("jdoe@example.com");\nperson.set_phone_number("555-1234");\n')),(0,s.kt)("p",null,"To apply the field mask we defined earlier, we can use the FieldMaskUtil::MergeFieldMask() method:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cpp"},"FieldMaskUtil::MergeFieldMask(field_mask, &person);\n")),(0,s.kt)("p",null,"After this call, the person message will contain the updated name and phone_number fields, while leaving the email field unchanged."),(0,s.kt)("h3",{id:"design-princile"},"Design princile"),(0,s.kt)("p",null,"When designing field masks, it's important to carefully consider the use cases and requirements for your API. Here are some tips for designing effective field masks:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Define clear semantics: When defining your field mask, it's important to clearly define the semantics of each field. This will help users understand how to use the field mask and what the resulting response will look like.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Use consistent naming conventions: Consistent naming conventions can make it easier for users to understand how to use the field mask. For example, you might choose to use dot notation (e.g. foo.bar.baz) or a comma-separated list (e.g. foo,bar,baz).")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Consider performance implications: Field masks can have performance implications, particularly when used with large responses. Be sure to carefully consider the impact on your API's performance when designing your field mask.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Provide defaults: It's often helpful to provide default field masks that cover common use cases. This can save users time and effort when using your API.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Document the field mask: Be sure to provide clear documentation for your field mask, including examples and best practices."))),(0,s.kt)("h3",{id:"conclusion"},"Conclusion"),(0,s.kt)("p",null,"Field masks are a powerful feature of protobuf that allow for selective updates to protobuf messages. By using field masks, we can reduce the amount of data sent over the network and improve performance."),(0,s.kt)("p",null,"However, it's important to note that field masks can only be used with mutable protobuf messages. In addition, the field mask must be constructed and applied correctly in order to achieve the desired behavior."),(0,s.kt)("h3",{id:"resources"},"Resources"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#fieldmask"},"Protocol Buffers documentation on field masks")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://restlet.com/blog/2018/04/17/using-field-masks-in-protocol-buffers/"},'"Using field masks in Protocol Buffers" by Arnaud Lauret')),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=0s1xgajbYcI"},'"Introduction to Protocol Buffers" by James Ward'))))}c.isMDXComponent=!0}}]);